appId: com.turboiam.agent
productName: TurboIAM Agent
copyright: Copyright © 2025 TurboIAM

# Clean filenames (no spaces, consistent format)
artifactName: turboiam-agent-${version}-${arch}.${ext}

# GitHub Releases — used by electron-builder --publish and auto-updater
publish:
  provider: github
  owner: gauravpassi
  repo: upcore-agent
  releaseType: release

# Output directory for built installers
directories:
  output: dist-electron
  buildResources: assets

# Files to include in the app bundle
files:
  - electron/dist/**
  - node_modules/electron-store/**
  - package.json

# Extra resources bundled alongside the app (accessible via process.resourcesPath)
extraResources:
  - from: server/dist
    to: server/dist
    filter:
      - "**/*.js"
      - "**/*.json"
  - from: frontend/dist
    to: frontend/dist
  - from: context
    to: context

# macOS
mac:
  icon: assets/icon.icns
  category: public.app-category.developer-tools
  target:
    - target: dmg
      arch:
        - x64
        - arm64
  # Hardened runtime + entitlements required for notarization
  # Leave unsigned for dev builds — clients can right-click → Open on first launch
  hardenedRuntime: false
  gatekeeperAssess: false

dmg:
  title: TurboIAM-Agent-${version}
  contents:
    - x: 130
      y: 220
    - x: 410
      y: 220
      type: link
      path: /Applications

# Windows
win:
  icon: assets/icon.ico
  target:
    - target: nsis
      arch:
        - x64

nsis:
  oneClick: false
  allowToChangeInstallationDirectory: true
  createDesktopShortcut: true
  createStartMenuShortcut: true
  artifactName: turboiam-agent-setup-${version}.${ext}

# Linux
linux:
  icon: assets/icon.png
  category: Development
  target:
    - target: AppImage
      arch:
        - x64
